================================================================================
COMPLETE OPTIMIZED PIPELINE DEMO
================================================================================

Testing: Phase 0 (Data Collection) + Phase 1 (Indexing) + Phase 2 (Retrieval)
With ALL optimizations enabled:
  ‚ö° Concurrent scraping (10 workers)
  ‚ö° Batch encoding (batch_size=32)
  ‚ö° Strict timeouts (3s fail-fast)
  ‚ö° Text-only headers

‚úì API key configured

Testing 5 claims:

  1. Vietnam is the world's second largest coffee exporter
  2. The Eiffel Tower is 330 meters tall
  3. Python was created by Guido van Rossum in 1991
  4. The Great Wall of China is visible from space
  5. Water boils at 100 degrees Celsius at sea level

================================================================================
INITIALIZATION (one-time setup after query entered)
================================================================================

Initializing pipeline components...
WARNING:tensorflow:From C:\Users\Admin\Documents\HCMUS\GitHub\CS419---FactChecking\env\Lib\site-packages\tf_keras\src\losses.py:2976: The name tf.losses.sparse_softmax_cross_entropy is deprecated. Please use tf.compat.v1.losses.sparse_softmax_cross_entropy instead.

   Loading sentence embedding model...
   üíª Using CPU
   üíª Using CPU
   ‚ö†Ô∏è  Adjusted batch_size: 32 ‚Üí 16 (optimized for CPU)
   Loading model: all-MiniLM-L6-v2...
modules.json:   0%|                                                                            | 0.00/349 [00:00<?, ?B/s]modules.json: 100%|#############################################################################| 349/349 [00:00<?, ?B/s]
config_sentence_transformers.json:   0%|                                                       | 0.00/116 [00:00<?, ?B/s]config_sentence_transformers.json: 100%|########################################################| 116/116 [00:00<?, ?B/s]
README.md: 0.00B [00:00, ?B/s]README.md: 10.5kB [00:00, ?B/s]
sentence_bert_config.json:   0%|                                                              | 0.00/53.0 [00:00<?, ?B/s]sentence_bert_config.json: 100%|##############################################################| 53.0/53.0 [00:00<?, ?B/s]
config.json:   0%|                                                                             | 0.00/612 [00:00<?, ?B/s]config.json: 100%|##############################################################################| 612/612 [00:00<?, ?B/s]
Xet Storage is enabled for this repo, but the 'hf_xet' package is not installed. Falling back to regular HTTP download. For better performance, install the package with: `pip install huggingface_hub[hf_xet]` or `pip install hf_xet`
model.safetensors:   0%|                                                                     | 0.00/90.9M [00:00<?, ?B/s]model.safetensors:  12%|######9                                                     | 10.5M/90.9M [00:00<00:03, 20.6MB/s]model.safetensors:  23%|#############8                                              | 21.0M/90.9M [00:00<00:02, 28.3MB/s]model.safetensors:  35%|####################7                                       | 31.5M/90.9M [00:01<00:01, 33.6MB/s]model.safetensors:  46%|###########################6                                | 41.9M/90.9M [00:01<00:01, 31.1MB/s]model.safetensors:  58%|##################################6                         | 52.4M/90.9M [00:01<00:01, 27.8MB/s]model.safetensors:  69%|#########################################5                  | 62.9M/90.9M [00:02<00:01, 26.6MB/s]model.safetensors:  81%|################################################4           | 73.4M/90.9M [00:02<00:00, 26.6MB/s]model.safetensors:  92%|#######################################################3    | 83.9M/90.9M [00:02<00:00, 29.4MB/s]model.safetensors: 100%|############################################################| 90.9M/90.9M [00:03<00:00, 27.7MB/s]model.safetensors: 100%|############################################################| 90.9M/90.9M [00:03<00:00, 28.0MB/s]
tokenizer_config.json:   0%|                                                                   | 0.00/350 [00:00<?, ?B/s]tokenizer_config.json: 100%|#############################################################| 350/350 [00:00<00:00, 342kB/s]
vocab.txt: 0.00B [00:00, ?B/s]vocab.txt: 232kB [00:00, 7.49MB/s]
tokenizer.json: 0.00B [00:00, ?B/s]tokenizer.json: 466kB [00:00, 20.0MB/s]
special_tokens_map.json:   0%|                                                                 | 0.00/112 [00:00<?, ?B/s]special_tokens_map.json: 100%|##################################################################| 112/112 [00:00<?, ?B/s]
config.json:   0%|                                                                             | 0.00/190 [00:00<?, ?B/s]config.json: 100%|##############################################################################| 190/190 [00:00<?, ?B/s]
   ‚úì Model loaded and ready!

‚úì Initialization complete in 19.75 seconds
   (This time is NOT included in phase measurements)

================================================================================
CLAIM 1/5: Vietnam is the world's second largest coffee exporter
================================================================================

[Phase 0] Data Collection...

============================================================
DATA COLLECTION PIPELINE
============================================================
Claim: Vietnam is the world's second largest coffee exporter
Target URLs: 10

[1/3] Searching the web...
      Found 8 URLs

[2/3] Scraping 8 URLs...
      ‚ö†Ô∏è  Filtered out 1 URLs from blocked domains
‚ö° Concurrent scraping: 7 URLs with 10 workers
  ‚úì [1/7] https://www.rmit.edu.vn/news/all-news/2024/aug/vie... (1016 chars)
  ‚úì [2/7] https://www.tradeimex.in/blogs/top-10-coffee-produ... (11094 chars)
  ‚úì [3/7] https://www.vietnamexportdata.com/blogs/vietnam-co... (14543 chars)
  ‚úì [4/7] https://www.vietnam-briefing.com/news/vietnam-coff... (16401 chars)
  ‚úì [5/7] https://www.nationthailand.com/news/world/40056338... (1051 chars)
  ‚úì [6/7] https://www.reddit.com/r/Coffee/comments/5db3or/vi... (355 chars)
  ‚úì [7/7] https://www.fas.usda.gov/data/production/commodity... (349 chars)

‚úì Successfully scraped 7/7 URLs
      Successfully scraped 7 documents

[3/3] Preparing corpus...
      ‚úì Saved to: C:\Users\Admin\Documents\HCMUS\GitHub\CS419---FactChecking\data\raw\corpus_Vietnam_is_the_world_s_second_largest_coffee_expor_20251128_213452.json

============================================================
COLLECTION COMPLETE
============================================================

‚úì Phase 0: 12.89s (7 docs, 7,136 words)
[Phase 1] Indexing...
Loading corpus from: C:\Users\Admin\Documents\HCMUS\GitHub\CS419---FactChecking\data\raw\corpus_Vietnam_is_the_world_s_second_largest_coffee_expor_20251128_213452.json
Extracted 307 sentences from 7 documents

Filtering 307 sentences...
   Filtered: 307 ‚Üí 297 sentences
   Removed: 10 low-quality/duplicate sentences

üöÄ FUNNEL ARCHITECTURE: BM25 filter ‚Üí Encode top 50 ‚Üí FAISS
   Total sentences: 297
   Claim: Vietnam is the world's second largest coffee exporter

[1/4] Saving sentence store (ALL sentences)...
   Saved 297 sentences to sentence_store.pkl (0.01s)

[2/4] Building BM25 Index on ALL 297 sentences (cheap filter)...
   ‚úì BM25 index built and saved (0.01s)

[3/4] Querying BM25 to get Top 50 candidates...
   ‚úì Retrieved top 50 candidates (0.00s)
   Score range: 15.55 ‚Üí 4.70
   ‚úì Saved top 50 candidates to top50_candidates.pkl

[4/4] Encoding ONLY Top 50 candidates (expensive operation)...
   ‚ö° Model pre-loaded, encoding only (no initialization overhead)
   üìä Encoding 50 sentences instead of 297 (5.9x reduction!)
Batches:   0%|                                                                                     | 0/4 [00:00<?, ?it/s]Batches:  50%|######################################5                                      | 2/4 [00:00<00:00, 14.27it/s]Batches: 100%|#############################################################################| 4/4 [00:00<00:00, 21.37it/s]
   ‚úì Encoding completed in 0.19s (264.3 sentences/sec)
   üíæ Memory saved: 247 embeddings not created!
   Saved FAISS index to faiss_index.bin (0.00s)

======================================================================
‚úì FUNNEL ARCHITECTURE COMPLETED SUCCESSFULLY!
======================================================================
  Location: C:\Users\Admin\Documents\HCMUS\GitHub\CS419---FactChecking\data\index
  BM25 index: 297 sentences (cheap filter)
  FAISS index: 50 embeddings (expensive operation)
  Efficiency gain: 5.9x less encoding work!
  Time breakdown:
    - BM25 build: 0.01s
    - BM25 query: 0.00s
    - Encoding 50 sentences: 0.19s
    - Total: 0.20s
  Estimated time saved vs encoding all: 0.93s
‚úì Phase 1: 0.39s (BM25 + encoding top 50)
   Reinitializing Retrieval Orchestrator to load new indexes...
Initializing Retrieval Orchestrator...
  Index directory: C:\Users\Admin\Documents\HCMUS\GitHub\CS419---FactChecking\data\index
  ‚úì BM25 retriever loaded
  ‚úì Embedding retriever loaded
  ‚úì Metadata handler initialized
  Weights: Semantic=0.5, Lexical=0.3, Metadata=0.2

[Phase 2] Retrieval...
‚úì Phase 2: 0.21s

‚úì Total processing: 13.49s

Top 3 Evidence:
  1. [0.899] Vietnam is the 2nd largest coffee exporter in the world, as per the global trade data....
  2. [0.866] Vietnam is the second biggest coffee exporter, but where is it all going?...
  3. [0.832] Vietnam (16%)
Vietnam is the second-largest coffee producer in the world, as per Vietnam customs exp...

================================================================================
CLAIM 2/5: The Eiffel Tower is 330 meters tall
================================================================================

[Phase 0] Data Collection...

============================================================
DATA COLLECTION PIPELINE
============================================================
Claim: The Eiffel Tower is 330 meters tall
Target URLs: 10

[1/3] Searching the web...
      Found 9 URLs

[2/3] Scraping 9 URLs...
‚ö° Concurrent scraping: 9 URLs with 10 workers
Trafilatura failed for https://parisjetaime.com/eng/article/explore-the-eiffel-tower-a1068: 403 Client Error: Forbidden for url: https://parisjetaime.com/eng/article/explore-the-eiffel-tower-a1068
  ‚úì [1/9] https://www.britannica.com/topic/Eiffel-Tower-Pari... (3875 chars)
  ‚úì [2/9] https://www.explore.com/1088063/the-eiffel-tower-a... (18788 chars)
Newspaper3k failed for https://parisjetaime.com/eng/article/explore-the-eiffel-tower-a1068: Article `download()` failed with 403 Client Error: Forbidden for url: https://parisjetaime.com/eng/article/explore-the-eiffel-tower-a1068 on URL https://parisjetaime.com/eng/article/explore-the-eiffel-tower-a1068
  ‚ö†Ô∏è  Truncated content: 64010 ‚Üí 20000 chars
Trafilatura failed for https://parisjetaime.com/eng/article/explore-the-eiffel-tower-a1068: 403 Client Error: Forbidden for url: https://parisjetaime.com/eng/article/explore-the-eiffel-tower-a1068
  ‚úì [3/9] https://www.toureiffel.paris/en/news/history-and-c... (2674 chars)
  ‚úì [4/9] https://www.toureiffel.paris/en/news/history-and-c... (3056 chars)
  ‚úì [5/9] https://en.wikipedia.org/wiki/Eiffel_Tower... (20000 chars)
Newspaper3k failed for https://parisjetaime.com/eng/article/explore-the-eiffel-tower-a1068: Article `download()` failed with 403 Client Error: Forbidden for url: https://parisjetaime.com/eng/article/explore-the-eiffel-tower-a1068 on URL https://parisjetaime.com/eng/article/explore-the-eiffel-tower-a1068
  ‚úó [6/9] https://parisjetaime.com/eng/article/explore-the-e... failed
  ‚úì [7/9] https://lockandenjoy.com/en/curiosities-about-the-... (5328 chars)
  ‚úì [8/9] https://www.toureiffel.paris/en/news/events/eiffel... (1285 chars)
  ‚úó [9/9] https://www.facebook.com/groups/2502328646536341/p... failed

‚úì Successfully scraped 7/9 URLs
      Successfully scraped 7 documents

[3/3] Preparing corpus...
      ‚úì Saved to: C:\Users\Admin\Documents\HCMUS\GitHub\CS419---FactChecking\data\raw\corpus_The_Eiffel_Tower_is_330_meters_tall_20251128_213506.json

============================================================
COLLECTION COMPLETE
============================================================

‚úì Phase 0: 9.41s (7 docs, 9,355 words)
[Phase 1] Indexing...
Loading corpus from: C:\Users\Admin\Documents\HCMUS\GitHub\CS419---FactChecking\data\raw\corpus_The_Eiffel_Tower_is_330_meters_tall_20251128_213506.json
Extracted 347 sentences from 7 documents

Filtering 347 sentences...
   Filtered: 347 ‚Üí 329 sentences
   Removed: 18 low-quality/duplicate sentences

üöÄ FUNNEL ARCHITECTURE: BM25 filter ‚Üí Encode top 50 ‚Üí FAISS
   Total sentences: 329
   Claim: The Eiffel Tower is 330 meters tall

[1/4] Saving sentence store (ALL sentences)...
   Saved 329 sentences to sentence_store.pkl (0.00s)

[2/4] Building BM25 Index on ALL 329 sentences (cheap filter)...
   ‚úì BM25 index built and saved (0.00s)

[3/4] Querying BM25 to get Top 50 candidates...
   ‚úì Retrieved top 50 candidates (0.00s)
   Score range: 12.46 ‚Üí 4.25
   ‚úì Saved top 50 candidates to top50_candidates.pkl

[4/4] Encoding ONLY Top 50 candidates (expensive operation)...
   ‚ö° Model pre-loaded, encoding only (no initialization overhead)
   üìä Encoding 50 sentences instead of 329 (6.6x reduction!)
Batches:   0%|                                                                                     | 0/4 [00:00<?, ?it/s]Batches:  25%|###################2                                                         | 1/4 [00:00<00:00,  9.17it/s]Batches: 100%|#############################################################################| 4/4 [00:00<00:00, 19.90it/s]
   ‚úì Encoding completed in 0.20s (245.4 sentences/sec)
   üíæ Memory saved: 279 embeddings not created!
   Saved FAISS index to faiss_index.bin (0.00s)

======================================================================
‚úì FUNNEL ARCHITECTURE COMPLETED SUCCESSFULLY!
======================================================================
  Location: C:\Users\Admin\Documents\HCMUS\GitHub\CS419---FactChecking\data\index
  BM25 index: 329 sentences (cheap filter)
  FAISS index: 50 embeddings (expensive operation)
  Efficiency gain: 6.6x less encoding work!
  Time breakdown:
    - BM25 build: 0.00s
    - BM25 query: 0.00s
    - Encoding 50 sentences: 0.20s
    - Total: 0.21s
  Estimated time saved vs encoding all: 1.14s
‚úì Phase 1: 0.43s (BM25 + encoding top 50)
   Reinitializing Retrieval Orchestrator to load new indexes...
Initializing Retrieval Orchestrator...
  Index directory: C:\Users\Admin\Documents\HCMUS\GitHub\CS419---FactChecking\data\index
  ‚úì BM25 retriever loaded
  ‚úì Embedding retriever loaded
  ‚úì Metadata handler initialized
  Weights: Semantic=0.5, Lexical=0.3, Metadata=0.2

[Phase 2] Retrieval...
‚úì Phase 2: 0.27s

‚úì Total processing: 10.11s

Top 3 Evidence:
  1. [0.751] How tall is the Eiffel Tower?...
  2. [0.694] It rests on a base that is 5 meters (17 feet) tall, and the TV antenna atop the tower gives it a tot...
  3. [0.693] The Eiffel Tower reached the height of 330 meters (1,083 feet) on March 15, 2022 thanks to this succ...

================================================================================
CLAIM 3/5: Python was created by Guido van Rossum in 1991
================================================================================

[Phase 0] Data Collection...

============================================================
DATA COLLECTION PIPELINE
============================================================
Claim: Python was created by Guido van Rossum in 1991
Target URLs: 10

[1/3] Searching the web...
      Found 8 URLs

[2/3] Scraping 8 URLs...
      ‚ö†Ô∏è  Filtered out 1 URLs from blocked domains
‚ö° Concurrent scraping: 7 URLs with 10 workers
  ‚úì [1/7] https://docs.python.org/3/faq/general.html... (17407 chars)
  ‚úì [2/7] https://www.w3schools.com/python/python_intro.asp... (1997 chars)
  ‚úì [3/7] https://github.blog/developer-skills/programming-l... (9581 chars)
  ‚ö†Ô∏è  Truncated content: 76584 ‚Üí 20000 chars
  ‚úì [4/7] https://en.wikipedia.org/wiki/Python_(programming_... (20000 chars)
  ‚úì [5/7] https://cs.stanford.edu/people/nick/py/python-abou... (2837 chars)
  ‚úì [6/7] https://pythoninstitute.org/about-python... (6858 chars)
  ‚úì [7/7] https://www.ebsco.com/research-starters/biography/... (12321 chars)

‚úì Successfully scraped 7/7 URLs
      Successfully scraped 7 documents

[3/3] Preparing corpus...
      ‚úì Saved to: C:\Users\Admin\Documents\HCMUS\GitHub\CS419---FactChecking\data\raw\corpus_Python_was_created_by_Guido_van_Rossum_in_1991_20251128_213518.json

============================================================
COLLECTION COMPLETE
============================================================

‚úì Phase 0: 6.98s (7 docs, 11,089 words)
[Phase 1] Indexing...
Loading corpus from: C:\Users\Admin\Documents\HCMUS\GitHub\CS419---FactChecking\data\raw\corpus_Python_was_created_by_Guido_van_Rossum_in_1991_20251128_213518.json
Extracted 521 sentences from 7 documents

Filtering 521 sentences...
   Filtered: 521 ‚Üí 481 sentences
   Removed: 40 low-quality/duplicate sentences

üöÄ FUNNEL ARCHITECTURE: BM25 filter ‚Üí Encode top 50 ‚Üí FAISS
   Total sentences: 481
   Claim: Python was created by Guido van Rossum in 1991

[1/4] Saving sentence store (ALL sentences)...
   Saved 481 sentences to sentence_store.pkl (0.00s)

[2/4] Building BM25 Index on ALL 481 sentences (cheap filter)...
   ‚úì BM25 index built and saved (0.17s)

[3/4] Querying BM25 to get Top 50 candidates...
   ‚úì Retrieved top 50 candidates (0.00s)
   Score range: 25.95 ‚Üí 4.67
   ‚úì Saved top 50 candidates to top50_candidates.pkl

[4/4] Encoding ONLY Top 50 candidates (expensive operation)...
   ‚ö° Model pre-loaded, encoding only (no initialization overhead)
   üìä Encoding 50 sentences instead of 481 (9.6x reduction!)
Batches:   0%|                                                                                     | 0/4 [00:00<?, ?it/s]Batches:  50%|######################################5                                      | 2/4 [00:00<00:00, 13.13it/s]Batches: 100%|#############################################################################| 4/4 [00:00<00:00, 19.98it/s]
   ‚úì Encoding completed in 0.20s (246.0 sentences/sec)
   üíæ Memory saved: 431 embeddings not created!
   Saved FAISS index to faiss_index.bin (0.00s)

======================================================================
‚úì FUNNEL ARCHITECTURE COMPLETED SUCCESSFULLY!
======================================================================
  Location: C:\Users\Admin\Documents\HCMUS\GitHub\CS419---FactChecking\data\index
  BM25 index: 481 sentences (cheap filter)
  FAISS index: 50 embeddings (expensive operation)
  Efficiency gain: 9.6x less encoding work!
  Time breakdown:
    - BM25 build: 0.17s
    - BM25 query: 0.00s
    - Encoding 50 sentences: 0.20s
    - Total: 0.37s
  Estimated time saved vs encoding all: 1.75s
‚úì Phase 1: 0.81s (BM25 + encoding top 50)
   Reinitializing Retrieval Orchestrator to load new indexes...
Initializing Retrieval Orchestrator...
  Index directory: C:\Users\Admin\Documents\HCMUS\GitHub\CS419---FactChecking\data\index
  ‚úì BM25 retriever loaded
  ‚úì Embedding retriever loaded
  ‚úì Metadata handler initialized
  Weights: Semantic=0.5, Lexical=0.3, Metadata=0.2

[Phase 2] Retrieval...
‚úì Phase 2: 0.25s

‚úì Total processing: 8.03s

Top 3 Evidence:
  1. [0.889] Python was created by Guido van Rossum and first released on February 20, 1991....
  2. [0.788] Python was created in 1991 and for many years was run by Guido Van Rossum, who is kind of a rock sta...
  3. [0.737] It was created by Guido van Rossum, and released in 1991....

================================================================================
CLAIM 4/5: The Great Wall of China is visible from space
================================================================================

[Phase 0] Data Collection...

============================================================
DATA COLLECTION PIPELINE
============================================================
Claim: The Great Wall of China is visible from space
Target URLs: 10

[1/3] Searching the web...
      Found 8 URLs

[2/3] Scraping 8 URLs...
‚ö° Concurrent scraping: 8 URLs with 10 workers
  ‚úì [1/8] https://en.wikipedia.org/wiki/Artificial_structure... (7118 chars)
Trafilatura failed for https://pmc.ncbi.nlm.nih.gov/articles/PMC3972694/: 403 Client Error: Forbidden for url: https://pmc.ncbi.nlm.nih.gov/articles/PMC3972694/
  ‚úì [2/8] https://www.wtamu.edu/~cbaird/sq/2012/12/11/what-m... (1223 chars)
  ‚úì [3/8] https://www.nasa.gov/image-article/great-wall/... (353 chars)
Newspaper3k failed for https://pmc.ncbi.nlm.nih.gov/articles/PMC3972694/: Article `download()` failed with 403 Client Error: Forbidden for url: https://pmc.ncbi.nlm.nih.gov/articles/PMC3972694/ on URL https://pmc.ncbi.nlm.nih.gov/articles/PMC3972694/
  ‚úì [4/8] https://www.skyatnightmagazine.com/space-science/c... (4976 chars)
  ‚úì [5/8] https://www.scientificamerican.com/article/is-chin... (5770 chars)
  ‚úì [6/8] https://www.reddit.com/r/todayilearned/comments/1k... (520 chars)
Trafilatura failed for https://pmc.ncbi.nlm.nih.gov/articles/PMC3972694/: 403 Client Error: Forbidden for url: https://pmc.ncbi.nlm.nih.gov/articles/PMC3972694/
Newspaper3k failed for https://pmc.ncbi.nlm.nih.gov/articles/PMC3972694/: Article `download()` failed with 403 Client Error: Forbidden for url: https://pmc.ncbi.nlm.nih.gov/articles/PMC3972694/ on URL https://pmc.ncbi.nlm.nih.gov/articles/PMC3972694/
  ‚úó [7/8] https://pmc.ncbi.nlm.nih.gov/articles/PMC3972694/... failed
  ‚úó [8/8] https://www.facebook.com/HistoryExtra/videos/can-y... failed

‚úì Successfully scraped 6/8 URLs
      Successfully scraped 6 documents

[3/3] Preparing corpus...
      ‚úì Saved to: C:\Users\Admin\Documents\HCMUS\GitHub\CS419---FactChecking\data\raw\corpus_The_Great_Wall_of_China_is_visible_from_space_20251128_213530.json

============================================================
COLLECTION COMPLETE
============================================================

‚úì Phase 0: 7.70s (6 docs, 3,311 words)
[Phase 1] Indexing...
Loading corpus from: C:\Users\Admin\Documents\HCMUS\GitHub\CS419---FactChecking\data\raw\corpus_The_Great_Wall_of_China_is_visible_from_space_20251128_213530.json
Extracted 174 sentences from 6 documents

Filtering 174 sentences...
   Filtered: 174 ‚Üí 137 sentences
   Removed: 37 low-quality/duplicate sentences

üöÄ FUNNEL ARCHITECTURE: BM25 filter ‚Üí Encode top 50 ‚Üí FAISS
   Total sentences: 137
   Claim: The Great Wall of China is visible from space

[1/4] Saving sentence store (ALL sentences)...
   Saved 137 sentences to sentence_store.pkl (0.00s)

[2/4] Building BM25 Index on ALL 137 sentences (cheap filter)...
   ‚úì BM25 index built and saved (0.00s)

[3/4] Querying BM25 to get Top 50 candidates...
   ‚úì Retrieved top 50 candidates (0.00s)
   Score range: 8.96 ‚Üí 3.30
   ‚úì Saved top 50 candidates to top50_candidates.pkl

[4/4] Encoding ONLY Top 50 candidates (expensive operation)...
   ‚ö° Model pre-loaded, encoding only (no initialization overhead)
   üìä Encoding 50 sentences instead of 137 (2.7x reduction!)
Batches:   0%|                                                                                     | 0/4 [00:00<?, ?it/s]Batches:  25%|###################2                                                         | 1/4 [00:00<00:00,  8.84it/s]Batches: 100%|#############################################################################| 4/4 [00:00<00:00, 19.41it/s]
   ‚úì Encoding completed in 0.21s (240.2 sentences/sec)
   üíæ Memory saved: 87 embeddings not created!
   Saved FAISS index to faiss_index.bin (0.00s)

======================================================================
‚úì FUNNEL ARCHITECTURE COMPLETED SUCCESSFULLY!
======================================================================
  Location: C:\Users\Admin\Documents\HCMUS\GitHub\CS419---FactChecking\data\index
  BM25 index: 137 sentences (cheap filter)
  FAISS index: 50 embeddings (expensive operation)
  Efficiency gain: 2.7x less encoding work!
  Time breakdown:
    - BM25 build: 0.00s
    - BM25 query: 0.00s
    - Encoding 50 sentences: 0.21s
    - Total: 0.21s
  Estimated time saved vs encoding all: 0.36s
‚úì Phase 1: 0.25s (BM25 + encoding top 50)
   Reinitializing Retrieval Orchestrator to load new indexes...
Initializing Retrieval Orchestrator...
  Index directory: C:\Users\Admin\Documents\HCMUS\GitHub\CS419---FactChecking\data\index
  ‚úì BM25 retriever loaded
  ‚úì Embedding retriever loaded
  ‚úì Metadata handler initialized
  Weights: Semantic=0.5, Lexical=0.3, Metadata=0.2

[Phase 2] Retrieval...
‚úì Phase 2: 0.32s

‚úì Total processing: 8.28s

Top 3 Evidence:
  1. [0.791] What makes the Great Wall of China the only man-made object visible from space?...
  2. [0.784] "Is China's Great Wall Visible from Space?"....
  3. [0.748] "Is the Great Wall of China Visible from the Moon?"....

================================================================================
CLAIM 5/5: Water boils at 100 degrees Celsius at sea level
================================================================================

[Phase 0] Data Collection...

============================================================
DATA COLLECTION PIPELINE
============================================================
Claim: Water boils at 100 degrees Celsius at sea level
Target URLs: 10

[1/3] Searching the web...
      Found 10 URLs

[2/3] Scraping 10 URLs...
      ‚ö†Ô∏è  Filtered out 1 URLs from blocked domains
‚ö° Concurrent scraping: 9 URLs with 10 workers
  ‚úì [1/9] https://en.wikipedia.org/wiki/High-altitude_cookin... (3295 chars)
Trafilatura failed for https://brainly.com/question/39366691: 403 Client Error: Forbidden for url: https://brainly.com/question/39366691
Trafilatura failed for https://www.lpi.usra.edu/education/explore/ice/background/allAboutWater/: 403 Client Error: Forbidden for url: https://www.lpi.usra.edu/education/explore/ice/background/allAboutWater/
  ‚úì [2/9] https://www.usatoday.com/story/life/food-dining/20... (3094 chars)
Newspaper3k failed for https://brainly.com/question/39366691: Article `download()` failed with 403 Client Error: Forbidden for url: https://brainly.com/question/39366691 on URL https://brainly.com/question/39366691
Newspaper3k failed for https://www.lpi.usra.edu/education/explore/ice/background/allAboutWater/: Article `download()` failed with 403 Client Error: Forbidden for url: https://www.lpi.usra.edu/education/explore/ice/background/allAboutWater/ on URL https://www.lpi.usra.edu/education/explore/ice/background/allAboutWater/
Trafilatura failed for https://brainly.com/question/39366691: 403 Client Error: Forbidden for url: https://brainly.com/question/39366691
  ‚úì [3/9] https://terpconnect.umd.edu/~wbreslyn/chemistry/pr... (894 chars)
Trafilatura failed for https://www.lpi.usra.edu/education/explore/ice/background/allAboutWater/: 403 Client Error: Forbidden for url: https://www.lpi.usra.edu/education/explore/ice/background/allAboutWater/
  ‚úì [4/9] https://www.compoundchem.com/2016/03/22/boiling-po... (5292 chars)
Newspaper3k failed for https://brainly.com/question/39366691: Article `download()` failed with 403 Client Error: Forbidden for url: https://brainly.com/question/39366691 on URL https://brainly.com/question/39366691
  ‚úó [5/9] https://brainly.com/question/39366691... failed
  ‚úì [6/9] https://mountainhouse.com/blogs/backpacking-hiking... (8087 chars)
  ‚úì [7/9] https://www.reddit.com/r/askscience/comments/1invt... (402 chars)
Newspaper3k failed for https://www.lpi.usra.edu/education/explore/ice/background/allAboutWater/: Article `download()` failed with 403 Client Error: Forbidden for url: https://www.lpi.usra.edu/education/explore/ice/background/allAboutWater/ on URL https://www.lpi.usra.edu/education/explore/ice/background/allAboutWater/
  ‚úó [8/9] https://www.lpi.usra.edu/education/explore/ice/bac... failed
  ‚úì [9/9] https://www.ebsco.com/research-starters/science/bo... (7501 chars)

‚úì Successfully scraped 7/9 URLs
      Successfully scraped 7 documents

[3/3] Preparing corpus...
      ‚úì Saved to: C:\Users\Admin\Documents\HCMUS\GitHub\CS419---FactChecking\data\raw\corpus_Water_boils_at_100_degrees_Celsius_at_sea_level_20251128_213543.json

============================================================
COLLECTION COMPLETE
============================================================

‚úì Phase 0: 8.36s (7 docs, 4,654 words)
[Phase 1] Indexing...
Loading corpus from: C:\Users\Admin\Documents\HCMUS\GitHub\CS419---FactChecking\data\raw\corpus_Water_boils_at_100_degrees_Celsius_at_sea_level_20251128_213543.json
Extracted 255 sentences from 7 documents

Filtering 255 sentences...
   Filtered: 255 ‚Üí 220 sentences
   Removed: 35 low-quality/duplicate sentences

üöÄ FUNNEL ARCHITECTURE: BM25 filter ‚Üí Encode top 50 ‚Üí FAISS
   Total sentences: 220
   Claim: Water boils at 100 degrees Celsius at sea level

[1/4] Saving sentence store (ALL sentences)...
   Saved 220 sentences to sentence_store.pkl (0.00s)

[2/4] Building BM25 Index on ALL 220 sentences (cheap filter)...
   ‚úì BM25 index built and saved (0.00s)

[3/4] Querying BM25 to get Top 50 candidates...
   ‚úì Retrieved top 50 candidates (0.00s)
   Score range: 18.01 ‚Üí 2.88
   ‚úì Saved top 50 candidates to top50_candidates.pkl

[4/4] Encoding ONLY Top 50 candidates (expensive operation)...
   ‚ö° Model pre-loaded, encoding only (no initialization overhead)
   üìä Encoding 50 sentences instead of 220 (4.4x reduction!)
Batches:   0%|                                                                                     | 0/4 [00:00<?, ?it/s]Batches:  75%|#########################################################7                   | 3/4 [00:00<00:00, 22.06it/s]Batches: 100%|#############################################################################| 4/4 [00:00<00:00, 27.97it/s]
   ‚úì Encoding completed in 0.15s (342.5 sentences/sec)
   üíæ Memory saved: 170 embeddings not created!
   Saved FAISS index to faiss_index.bin (0.00s)

======================================================================
‚úì FUNNEL ARCHITECTURE COMPLETED SUCCESSFULLY!
======================================================================
  Location: C:\Users\Admin\Documents\HCMUS\GitHub\CS419---FactChecking\data\index
  BM25 index: 220 sentences (cheap filter)
  FAISS index: 50 embeddings (expensive operation)
  Efficiency gain: 4.4x less encoding work!
  Time breakdown:
    - BM25 build: 0.00s
    - BM25 query: 0.00s
    - Encoding 50 sentences: 0.15s
    - Total: 0.15s
  Estimated time saved vs encoding all: 0.50s
‚úì Phase 1: 0.25s (BM25 + encoding top 50)
   Reinitializing Retrieval Orchestrator to load new indexes...
Initializing Retrieval Orchestrator...
  Index directory: C:\Users\Admin\Documents\HCMUS\GitHub\CS419---FactChecking\data\index
  ‚úì BM25 retriever loaded
  ‚úì Embedding retriever loaded
  ‚úì Metadata handler initialized
  Weights: Semantic=0.5, Lexical=0.3, Metadata=0.2

[Phase 2] Retrieval...
‚úì Phase 2: 0.20s

‚úì Total processing: 8.82s

Top 3 Evidence:
  1. [0.815] Boiling Point of Water
At sea level, water boils at 212 degrees Fahrenheit(212¬∞F) or 100 degrees Cel...
  2. [0.767] The boiling point of water is 212 degrees Fahrenheit or 100 degrees Celsius at sea level....
  3. [0.744] For example, at sea level water will remain at 100 degrees Celsius (at a pressure of 1 atm or 101.3 ...

================================================================================
PERFORMANCE SUMMARY - ALL CLAIMS
================================================================================

INITIALIZATION (one-time): 19.75s

PER-CLAIM PERFORMANCE:
  Claims processed:           5
  Average Phase 0:            9.07s
  Average Phase 1:            0.43s
  Average Phase 2:            0.25s
  Average per claim:          9.74s

  Total processing time:      48.72s
  Total with init:            68.48s
  Throughput:                 6.2 claims/min

BREAKDOWN BY CLAIM:
  1. Vietnam is the world's second largest coffee expor | 13.49s (P0:12.9s P1: 0.4s P2: 0.2s)
  2. The Eiffel Tower is 330 meters tall                | 10.11s (P0: 9.4s P1: 0.4s P2: 0.3s)
  3. Python was created by Guido van Rossum in 1991     |  8.03s (P0: 7.0s P1: 0.8s P2: 0.2s)
  4. The Great Wall of China is visible from space      |  8.28s (P0: 7.7s P1: 0.3s P2: 0.3s)
  5. Water boils at 100 degrees Celsius at sea level    |  8.82s (P0: 8.4s P1: 0.3s P2: 0.2s)

‚úÖ EXCELLENT! Average processing time is optimal!

================================================================================
DEMO COMPLETE
================================================================================
